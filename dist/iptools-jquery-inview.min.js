/*! iptools-jquery-inview - v0.0.3 - 2015-06-17
* https://github.com/interactive-pioneers/iptools-jquery-inview
* Copyright Â© 2015 Interactive Pioneers GmbH; Licensed GPL */
!function(a,b){"use strict";function c(b,c){this.element=a(b),this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var d=function(){},e="iptInView",f={throttle:100,delay:500,inViewClass:"in-viewport",allInViewClass:"all-in-viewport",onAppear:d,onAppeared:d,onFirstAppear:d,onFirstAppeared:d,onDisappear:d,onDisappeared:d};c.prototype={init:function(){this.window=a(b),this.update(),this.lastScroll=0,this.inView&&(this.executeWithDelay(this.settings.onAppear),this.executeWithDelay(this.settings.onFirstAppear)),this.allInView&&(this.executeWithDelay(this.settings.onAppeared),this.executeWithDelay(this.settings.onFirstAppeared)),this.appearCount=this.inView?1:0,this.appearedCount=this.allInView?1:0,this.addEventListeners()},update:function(){this.viewport=this.getViewport(),this.elementBounds=this.getElementBounds(),this.inView=this.isInView(),this.allInView=this.isAllInView(),this.toggleClasses()},getViewport:function(){var a={top:this.window.scrollTop(),left:this.window.scrollLeft()};return a.right=a.left+this.window.width(),a.bottom=a.top+this.window.height(),a},getElementBounds:function(){var a=this.element.offset();return a.right=a.left+this.element.outerWidth(),a.bottom=a.top+this.element.outerHeight(),a},isInView:function(){var a=this.viewport.top>this.elementBounds.bottom,b=this.viewport.bottom<this.elementBounds.top,c=this.viewport.right<this.elementBounds.left,d=this.viewport.left>this.elementBounds.right;return!(a||b||c||d)},isAllInView:function(){var a=this.viewport.top<=this.elementBounds.top,b=this.viewport.bottom>=this.elementBounds.bottom,c=this.viewport.right>=this.elementBounds.right,d=this.viewport.left<=this.elementBounds.left;return a&&b&&c&&d},toggleClasses:function(){this.inView?this.element.addClass(this.settings.inViewClass):this.element.removeClass(this.settings.inViewClass),this.allInView?this.element.addClass(this.settings.allInViewClass):this.element.removeClass(this.settings.allInViewClass)},executeWithDelay:function(a){var b=this;b.settings.delay>0?setTimeout(function(){a(b)},b.settings.delay):a.call(b)},handleScroll:function(a){var b=a.data,c=Date.now();if(c-b.lastScroll>b.settings.throttle){var d={inView:b.inView,allInView:b.allInView};b.update(),!d.inView&&b.inView&&(b.executeWithDelay(b.settings.onAppear),0===b.appearCount&&b.executeWithDelay(b.settings.onFirstAppear),b.appearCount++),!d.allInView&&b.allInView&&(b.executeWithDelay(b.settings.onAppeared),0===b.appearedCount&&b.executeWithDelay(b.settings.onFirstAppeared),b.appearedCount++),d.allInView&&!b.allInView&&b.executeWithDelay(b.settings.onDisappear),d.inView&&!b.inView&&b.executeWithDelay(b.settings.onDisappeared),b.lastScroll=c}},addEventListeners:function(){this.window.on("scroll."+this._name,null,this,this.handleScroll)},destroy:function(){this.$element.off("scroll."+this._name),this.$element.removeData("plugin_"+e)}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new c(this,b))})}}(jQuery,window);